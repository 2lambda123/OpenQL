version 1.2

pragma @ql.name("structure_decomposition_goto")

pragma @ql.platform({|
    "eqasm_compiler": {
        "passes": [
            {
                "type": "dec.Structure",
                "options": {
                    "output_prefix": "test_output/%N_out",
                    "write_dot_graph": "yes"
                }
            },
            {
                "type": "io.cqasm.Report",
                "options": {
                    "output_prefix": "test_output/%N_out"
                }
            }
        ]
    },
    "hardware_settings": {
        "qubit_number": 7,
        "creg_number": 32,
        "breg_number": 32
    },
    "instructions": {
        "test": {
            "prototype": ["W:qubit"],
            "duration_cycles": 1
        }
    }
|})

.sa
    test q[0]
    cond (breg(0)) goto sb
    cond (breg(1)) goto sc
    cond (breg(2)) goto sd
    test q[1]

.sb
    test q[2]
    goto sa

.sc
    test q[3]

.sd
    test q[4]

