{
	// author: 	Wouter Vlothuizen
	// notes: 	based on '../test_cfg_none_s7.json'

	"file_type": "OpenQL-config",
	"file_version": "2.0",
	"min_version_openql": "0.1",
	"min_version_backend": "0.1",

	"eqasm_compiler" : "eqasm_backend_cc",

	"hardware_settings": {
		"qubit_number": 7,
		"cycle_time" : 20,
		// "mw_mw_buffer": 0,
		// "mw_flux_buffer": 0,
		// "mw_readout_buffer": 0,
		// "flux_mw_buffer": 0,
		// "flux_flux_buffer": 0,
		// "flux_readout_buffer": 0,
		// "readout_mw_buffer": 0,
		// "readout_flux_buffer": 0,
		// "readout_readout_buffer": 0,

		// FIXME: we put this key inside "hardware_settings" for now, but it should be below "backend" or so
		"eqasm_backend_cc": {
			// Immutable properties of instruments.
			// The keys "cc", "switch", "awg" and "measure" are built-in instrument types
			"instrument_definitions": {
				"cc": [
					{	"name": "qutech-cc",
						"slots": 12
					}
				],
				// FIXME: discern awg-mw and awg-flux?, or leave out keys (what would we use them for?) and just use signal_type everywhere
				"awg": [
					{	"name": "qutech-qwg",
						"channels": 4,
						"control_group_sizes": [4]
					},
					{	"name": "zi-hdawg",
						"channels": 8,
						"control_group_sizes": [1, 4, 8]
					}
				],
				"switch": [
					{	"name": "qutech-vsm",
						"channels": 32,
						"control_group_sizes": [1]
					}
				],
				"measure": [
					{	"name": "zi-uhfqc",
						"channels": 9,
						"control_group_sizes": [1]
					}
				]
			},

			// Modes to control instruments. These define which bits are used to
			// control a group of channels
			"control_modes": [
				{	"name": "awg8-mw-vsm",
					"control_group_count": 2,
					"control_bits": [],
					"triggers": [32]
				},
				{	"name": "awg8-mw-direct-iq",
					"control_group_count": 4,
					"control_bits": [],
					"triggers": [32]
				},
				{	"name": "awg8-flux",
					"control_group_count": 2,
					"control_bits": [],
					"triggers": [32]
				},
				{	"name": "uhfqc-9ch",
					"control_group_count": 9,
					"control_bits": [],
					"result-bits": [],
					"triggers": [32]
				},
				{	"name": "vsm-32ch",
					"control_group_count": 32,
					"control_bits": [],
					"triggers": []
				}
			],

			// Instruments used in this setup, their configuration and connectivity.
			// The keys correspond to "name" fields defined in section "instrument_definitions". All
			// of those must be present here, but they may be empty
			"instruments": {
				"qutech-cc": [
					{	"name": "cc",
						"ccio": [
							{	"slot": 0,
								"io_module": "cc-conn-dio-diff",
								"control_instrument": "awg8-mw-0"
							},
							{	"slot": 1,
								"io_module": "cc-conn-dio-diff",
								"control_instrument": "awg8-flux-0"
							},
							{	"slot": 2,
								"io_module": "cc-conn-dio",
								"control_instrument": "uhfqc-0"
							},
							{	"slot": 3,
								"io_module": "cc-conn-vsm",
								"control_instrument": "vsm-0"
							}
						]
					}
				],
				"qutech-qwg": [
					{	"name": "foo"
					}
				],
				"zi-hdawg": [
					{	"name": "awg8-mw-0",
						"control_mode": "awg8-mw-vsm",
						"signal_type": "mw",
						"qubits": [[0, 1, 2, 3], [4, 5, 6, 7]]
					},
					{	"name": "awg8-flux-0",
						"control_mode": "awg8-flux",
						"signal_type": "flux",
						"qubits": [0, 1, 2, 3, 4, 5, 6, 7, -1]
					}
				],
				"qutech-vsm": [
					{	"name": "vsm-0",
						"control_mode": "vsm-32ch",
						"signal_type": "switch",
						"qubits": [0, 1, 2, 3, 4, 5, 6, 7, 8]
					}
				],
				"zi-uhfqc": [
					{	"name": "uhfqc-0",
						"control_mode": "uhfqc-9ch",
						"signal_type": "measure",
						"qubits": [0, 1, 2, 3, 4, 5, 6, 7, -1]
					}
				]
			}
		}
	},

	"resources": {
		"qubits": {
			"count": 7
		},
		"qwgs" : {
			"count": 3,
			"connection_map": {
				"0" : [0, 1],
				"1" : [2, 3, 4],
				"2" : [5, 6]
			}
		},
		"meas_units" : {
			"count": 2,
			"connection_map":
			{
				"0" : [0, 2, 3, 5, 6],
				"1" : [1, 4]
			}
		},
		"edges": {
			"count": 16,
			"connection_map": {
				"0": [2, 10],
				"1": [3, 11],
				"2": [0, 8],
				"3": [1, 9],
				"4": [6, 14],
				"5": [7, 15],
				"6": [4, 12],
				"7": [5, 13],
				"8": [2, 10],
				"9": [3, 11],
				"10": [0, 8],
				"11": [1, 9],
				"12": [6, 14],
				"13": [7, 15],
				"14": [4, 12],
				"15": [5, 13]
			}
		}
	},

	"topology": {
		"x_size": 5,
		"y_size": 3,
		"qubits": [
			{ "id": 0,  "x": 1, "y": 2 },
			{ "id": 1,  "x": 3, "y": 2 },
			{ "id": 2,  "x": 0, "y": 1 },
			{ "id": 3,  "x": 2, "y": 1 },
			{ "id": 4,  "x": 4, "y": 1 },
			{ "id": 5,  "x": 1, "y": 0 },
			{ "id": 6,  "x": 3, "y": 0 }
		],
		"edges": [
			{ "id": 0,  "src": 2, "dst": 0 },
			{ "id": 1,  "src": 0, "dst": 3 },
			{ "id": 2,  "src": 3, "dst": 1 },
			{ "id": 3,  "src": 1, "dst": 4 },
			{ "id": 4,  "src": 2, "dst": 5 },
			{ "id": 5,  "src": 5, "dst": 3 },
			{ "id": 6,  "src": 3, "dst": 6 },
			{ "id": 7,  "src": 6, "dst": 4 },
			{ "id": 8,  "src": 0, "dst": 2 },
			{ "id": 9,  "src": 3, "dst": 0 },
			{ "id": 10,  "src": 1, "dst": 3 },
			{ "id": 11,  "src": 4, "dst": 1 },
			{ "id": 12,  "src": 5, "dst": 2 },
			{ "id": 13,  "src": 3, "dst": 5 },
			{ "id": 14,  "src": 6, "dst": 3 },
			{ "id": 15,  "src": 4, "dst": 6 }
		]
	},

	// FIXME: allow AWG8 setPrecompClear with wave
	// FIXME: remove instructions we don't/cannot use
	"instructions": {
		// additions from 'CC-software-implementation.docx':
		"park_cz" : { // park signal with same length as cz gate
			"duration" : 40,
			"matrix": [ [0.0,1.0], [1.0,0.0], [1.0,0.0], [0.0,0.0] ],	// FIXME: required
			"cc": {
				"sig": {
					"flux": {
						"qubit": "q%0",	// FIXME: necessary, or implicit from parameters we get at runtime. Let's look at cz
						"wave": ["{gateName}-{instrumentName}"]
					}
//					"flux,<codeword>,%q" // %q assumes same codeword for all qubits
				}
			}
		},
		"park_measure" : { // park signal with same length as measurement
			"duration" : 300,
			"matrix": [ [0.0,1.0], [1.0,0.0], [1.0,0.0], [0.0,0.0] ],	// FIXME: required
			"cc": {
				"sig": {
//					"flux,<codeword>,%q" // %q assumes same codeword for all qubits
				}
			}
		},

		// gate set from 'test_cfg_none_s7.json':
		"prepx": {
			"duration": 320,
			"latency": 0,
			"matrix": [ [0.0,1.0], [1.0,0.0], [1.0,0.0], [0.0,0.0] ],
			"disable_optimization": false,
			"type": "mw",
			"cc_light_instr_type": "single_qubit_gate",
			"cc_light_instr": "prepx"
		},
		"prepz": {
			"duration": 320,
			"latency": 0,
			"matrix": [ [0.0,1.0], [1.0,0.0], [1.0,0.0], [0.0,0.0] ],
			"disable_optimization": false,
			"type": "none",
			"cc_light_instr_type": "single_qubit_gate",
			"cc_light_instr": "prepz"
		},
		"cprepz": {
			"duration": 320,
			"latency": 0,
			"matrix": [ [0.0,1.0], [1.0,0.0], [1.0,0.0], [0.0,0.0] ],
			"disable_optimization": false,
			"type": "mw",
			"cc_light_instr_type": "single_qubit_gate",
			"cc_light_instr": "cprepz",
			"cc_light_cond" : 1
		},
		"measx": {
			"duration": 300,
			"latency": 0,
			"matrix": [ [0.0,1.0], [1.0,0.0], [1.0,0.0], [0.0,0.0] ],
			"disable_optimization": false,
			"type": "readout",
			"cc_light_instr_type": "single_qubit_gate",
			"cc_light_instr": "measx"
		},
		"measz": {
			"duration": 300,
			"latency": 0,
			"matrix": [ [0.0,1.0], [1.0,0.0], [1.0,0.0], [0.0,0.0] ],
			"disable_optimization": false,
			"type": "readout",
			"cc_light_instr_type": "single_qubit_gate",
			"cc_light_instr": "measz"
		},
		"measure": {
			"duration": 300,
			"latency": 0,
			"matrix": [ [0.0,1.0], [1.0,0.0], [1.0,0.0], [0.0,0.0] ],
			"disable_optimization": false,
			"type": "readout",
			"cc_light_instr_type": "single_qubit_gate",
			"cc_light_instr": "measz"
		},
		"i": {
			"duration": 20,
			"latency": 0,
			"matrix": [ [0.0,1.0], [1.0,0.0], [1.0,0.0], [0.0,0.0] ],
			"disable_optimization": false,
			"type": "mw",
			"cc_light_instr_type": "single_qubit_gate",
			"cc_light_instr": "i"
		},
		"x": {
			"duration": 20,
			"latency": 0,
			"matrix": [ [0.0,1.0], [1.0,0.0], [1.0,0.0], [0.0,0.0] ],
			"disable_optimization": false,
			"type": "mw",
			"cc_light_instr_type": "single_qubit_gate",
			"cc_light_instr": "x",
			"cc": {
				"sig": {
					"mw": [
						"{gateName}-gauss-{instrumentName}-i",
						"{gateName}-gauss-{instrumentName}-q",
						"{gateName}-derGauss-{instrumentName}-i",
						"{gateName}-derGauss-{instrumentName}-q"	// FIXME: {instrumentName} should evaluate to proper channel group
					],
					"switch": ["{q}"]
//					"flux": [],
//					"measure": [],	// specify output and weight?
				}
			}
		},
		"y": {
			"duration": 20,
			"latency": 0,
			"matrix": [ [0.0,1.0], [1.0,0.0], [1.0,0.0], [0.0,0.0] ],
			"disable_optimization": false,
			"type": "mw",
			"cc_light_instr_type": "single_qubit_gate",
			"cc_light_instr": "y"
		},
		"z": {
			"duration": 20,
			"latency": 0,
			"matrix": [ [0.0,1.0], [1.0,0.0], [1.0,0.0], [0.0,0.0] ],
			"disable_optimization": false,
			"type": "mw",
			"cc_light_instr_type": "single_qubit_gate",
			"cc_light_instr": "z"
		},
		"h": {
			"duration": 20,
			"latency": 0,
			"matrix": [ [0.0,1.0], [1.0,0.0], [1.0,0.0], [0.0,0.0] ],
			"disable_optimization": false,
			"type": "mw",
			"cc_light_instr_type": "single_qubit_gate",
			"cc_light_instr": "h"
		},
		"s": {
			"duration": 20,
			"latency": 0,
			"matrix": [ [0.0,1.0], [1.0,0.0], [1.0,0.0], [0.0,0.0] ],
			"disable_optimization": false,
			"type": "mw",
			"cc_light_instr_type": "single_qubit_gate",
			"cc_light_instr": "s"
		},
		"sdag": {
			"duration": 20,
			"latency": 0,
			"matrix": [ [0.0,1.0], [1.0,0.0], [1.0,0.0], [0.0,0.0] ],
			"disable_optimization": false,
			"type": "mw",
			"cc_light_instr_type": "single_qubit_gate",
			"cc_light_instr": "sdag"
		},
		"rx90": {
			"duration": 20,
			"latency": 0,
			"matrix": [ [0.0,1.0], [1.0,0.0], [1.0,0.0], [0.0,0.0] ],
			"disable_optimization": false,
			"type": "mw",
			"cc_light_instr_type": "single_qubit_gate",
			"cc_light_instr": "x90"
		},
		"xm90": {
			"duration": 20,
			"latency": 0,
			"matrix": [ [0.0,1.0], [1.0,0.0], [1.0,0.0], [0.0,0.0] ],
			"disable_optimization": false,
			"type": "mw",
			"cc_light_instr_type": "single_qubit_gate",
			"cc_light_instr": "xm90"
		},
		"ry90 q0": {
			"duration": 20,
			"latency": 0,
			"matrix": [ [0.0,1.0], [1.0,0.0], [1.0,0.0], [0.0,0.0] ],
			"disable_optimization": false,
			"type": "mw",
			"cc_light_instr_type": "single_qubit_gate",
			"cc_light_instr": "y90"
		},
		"ym90": {
			"duration": 20,
			"latency": 0,
			"matrix": [ [0.0,1.0], [1.0,0.0], [1.0,0.0], [0.0,0.0] ],
			"disable_optimization": false,
			"type": "mw",
			"cc_light_instr_type": "single_qubit_gate",
			"cc_light_instr": "ym90"
		},
		"t": {
			"duration": 20,
			"latency": 0,
			"matrix": [ [0.0,1.0], [1.0,0.0], [1.0,0.0], [0.0,0.0] ],
			"disable_optimization": false,
			"type": "mw",
			"cc_light_instr_type": "single_qubit_gate",
			"cc_light_instr": "t"
		},
		"tdag": {
			"duration": 20,
			"latency": 0,
			"matrix": [ [0.0,1.0], [1.0,0.0], [1.0,0.0], [0.0,0.0] ],
			"disable_optimization": false,
			"type": "mw",
			"cc_light_instr_type": "single_qubit_gate",
			"cc_light_instr": "tdag"
		},
		"x45": {
			"duration": 20,
			"latency": 0,
			"matrix": [ [0.0,1.0], [1.0,0.0], [1.0,0.0], [0.0,0.0] ],
			"disable_optimization": false,
			"type": "mw",
			"cc_light_instr_type": "single_qubit_gate",
			"cc_light_instr": "x45"
		},
		"xm45": {
			"duration": 20,
			"latency": 0,
			"matrix": [ [0.0,1.0], [1.0,0.0], [1.0,0.0], [0.0,0.0] ],
			"disable_optimization": false,
			"type": "mw",
			"cc_light_instr_type": "single_qubit_gate",
			"cc_light_instr": "xm45"
		},
		"ry180": {
			"duration": 20,
			"latency": 0,
			"matrix": [ [0.0,1.0], [1.0,0.0], [1.0,0.0], [0.0,0.0] ],
			"disable_optimization": false,
			"type": "mw",
			"cc_light_instr_type": "single_qubit_gate",
			"cc_light_instr": "ry180"
		},
		"cnot": {
			"duration": 80,
			"latency": 0,
			"matrix": [ [0.0,1.0], [1.0,0.0], [1.0,0.0], [0.0,0.0] ],
			"disable_optimization": true,
			"type": "flux",
			"cc_light_instr_type": "two_qubit_gate",
			"cc_light_instr": "cnot"
		},

		// should handle:
		// https://github.com/QE-Lab/OpenQL/issues/166
		// https://github.com/QE-Lab/OpenQL/issues/180
		"cz": {
			"duration": 40,
			"latency": 0,
			"matrix": [ [0.0,1.0], [1.0,0.0], [1.0,0.0], [0.0,0.0] ],
			"disable_optimization": true,
			"type": "flux",
			"cc_light_instr_type": "two_qubit_gate",
			"cc_light_instr": "cz",
			"cc": {
				"sig": {
					"flux": {
						"qubit": "q%0",	// FIXME: necessary, or implicit from parameters we get at runtime. Let's look at cz
						"wave": ["{gateName}-{instrumentName}"]
					}
//					"flux,<codeword>,%q" // %q assumes same codeword for all qubits
				}
			}
		}
	}	// end of "instructions"
}

